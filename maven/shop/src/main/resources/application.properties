# ========== 原有核心配置（完全保留） ==========
spring.application.name=shop

# 数据库配置
spring.datasource.url=jdbc:mysql://localhost:3306/shop_db?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=shop_app_user
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# MyBatis配置
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.type-aliases-package=com.example.shop.entity

spring.sql.init.dependency-detection=none

# 编码配置
logging.charset.console=UTF-8
logging.charset.file=UTF-8
server.tomcat.uri-encoding=UTF-8

# ========== 新增：文件上传大小限制（解决图片上传过大问题） ==========
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

# ========== 新增：静态资源映射（前端可访问上传的图片） ==========
# 映射规则：classpath:/static/（项目静态资源） + file:${upload.path}（本地图片上传目录）
spring.web.resources.static-locations=classpath:/static/,file:${upload.path}

# ========== 新增：自定义图片上传本地路径（和代码中@Value("${upload.path}")对应） ==========
# Windows系统路径（注意：properties中路径用\\或/，推荐用/）
upload.path=D:/shop_uploads/products/
# Linux/Mac系统路径（部署服务器时替换）
# upload.path=/opt/shop_uploads/products/